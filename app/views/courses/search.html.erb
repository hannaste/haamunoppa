<h1>Hakutulokset</h1>

<% if user_signed_in? %>
  <% case current_user.role %>
  <% when 'user' %>

<div class="table-responsive">
<table id="arrow" class="table table-hover">
  <thead>
    <tr>
      <th>Kurssikoodi</th>
      <th>Nimi</th>
      <th>Opintopisteet</th>
      <th>Periodi</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @courses.each do |course| %>
      <tr data-link="<%= course_path(course) %>">
        <td><%= course.code %></td>
        <td><%= course.name %></td>
        <td><%= course.credits %></td>
        <td><%= course.period %></td>

      </tr>
    <% end %>
  </tbody>
</table>
</div>
<br>

<% when 'admin' %>

<div class="table-responsive">
<table id="arrow" class="table table-hover">
  <thead>
    <tr>
      <th>Kurssikoodi</th>
      <th>Nimi</th>
      <th>Opintopisteet</th>
      <th>Periodi</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @courses.each do |course| %>
      <tr>
        <td><%= course.code %></td>
        <td><%= course.name %></td>
        <td><%= course.credits %></td>
        <td><%= course.period %></td>
        <td><%= link_to 'Näytä', course %></td>
        <td><%= link_to 'Muokkaa', edit_course_path(course) %></td>
        <td><%= link_to 'Poista', course, method: :delete, data: { confirm: 'Oletko varma, että haluat poistaa kurssin?' } %></td>

      </tr>
    <% end %>
  </tbody>
</table>
</div>
<br>

<% end %>
<% end %>


<script>

jQuery(function($) {
$("tr[data-link]").click(function() {
window.location = this.dataset.link
});
})

</script>